(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initFunc=undefined;var _main=require("./static-func/_main");var _main2=require("./directives/_main");var _main3=require("./dom-init/_main");exports.initFunc=initFunc;function initFunc($lc){(0,_main.setStaticFunc)($lc);(0,_main2.directiveMain)($lc);(0,_main3.domInit)($lc)}},{"./directives/_main":4,"./dom-init/_main":9,"./static-func/_main":10}],2:[function(require,module,exports){"use strict";var _LancerFrameInit=require("./LancerFrame-init.js");(function(root,undefined){"use strict";var $lc={};$lc.VERSION="0.0.1";$lc.AUTHOR="LancerComet";$lc.BROWSER="";(function(){$lc.inited=false;window.addEventListener("DOMContentLoaded",function(){console.log("Init at DOMContentLoaded");(0,_LancerFrameInit.initFunc)(LancerFrame)});window.addEventListener("load",function(){if($lc.inited)return;(0,_LancerFrameInit.initFunc)(LancerFrame)});setTimeout(function(){if($lc.inited)return;document.readyState==="complete"&&(0,_LancerFrameInit.initFunc)(LancerFrame)},1)})();root.LancerFrame=root.$lc=$lc})(window)},{"./LancerFrame-init.js":1}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _=exports._={"typeof":function _typeof(target){return Object.prototype.toString.call(target).match(/ \S*/i)[0].replace(" ","").replace("]","").toLowerCase()}}},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directiveMain=undefined;var _directive=require("./directive");var _lcText=require("./lc-text");var _lcModel=require("./lc-model");var _lcHtml=require("./lc-html");exports.directiveMain=directiveMain;function directiveMain($lc){$lc.directives={};$lc.directive=(0,_directive.directive)($lc);(0,_lcModel.lcModel)($lc);(0,_lcText.lcText)($lc);(0,_lcHtml.lcHTML)($lc)}},{"./directive":5,"./lc-html":6,"./lc-model":7,"./lc-text":8}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directive=undefined;var _2=require("../_/_");exports.directive=directive;function directive($lc){return function(name,options){if(_2._.typeof(name)!=="string"){throw new Error("自定义指令时必须使用字符串作为指令名称.")}$lc.directives[name]=options}}},{"../_/_":3}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcHTML=lcHTML;function lcHTML($lc){$lc.directive("html",{$init:function $init(element,initValue){element.innerHTML=initValue},$update:function $update(element,newValue){element.innerHTML=newValue}})}},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcModel=lcModel;function lcModel($lc){$lc.directive("model",{$init:function $init(element,initValue){element.value=initValue},$update:function $update(element,newValue){element.value=newValue},$done:function $done(){}})}},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcHTML=lcHTML;function lcHTML($lc){$lc.directive("text",{$init:function $init(element,initValue){element.innerText=initValue},$update:function $update(element,newValue){element.innerText=newValue}})}},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.domInit=domInit;function domInit($lc){"use strict";$lc.$directives={}}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setStaticFunc=undefined;var _controller=require("./controller");var _directive=require("./directive");exports.setStaticFunc=staticFunc;function staticFunc($lc){(0,_controller.controller)($lc)}},{"./controller":11,"./directive":12}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controller=undefined;var _2=require("../_/_");exports.controller=controller;function controller($lc){$lc.controllers={};$lc.controller=function(ctrlName,dependencies,initFunc){if(_2._.typeof(dependencies)!=="array"){initFunc=dependencies;dependencies=[]}var scope={$name:ctrlName};$lc.controllers[ctrlName]=scope;initFunc&&function(){initFunc.bind(scope)();var _loop=function _loop(prop){if(!scope.hasOwnProperty(prop)||prop==="$name"){return"continue"}(function(){var propKey=prop,propValue=scope[prop];ctrlDoms=null;Object.defineProperty(scope,propKey,{get:function get(){return propValue},set:function set(newValue){!ctrlDoms&&(ctrlDoms=document.querySelectorAll("[lc-controller="+ctrlName+"]"));console.log(ctrlName+"."+itemKey+" 从 "+itemValue+" 修改为 "+newValue);itemValue=newValue;syncController(ctrlDoms,itemKey,itemValue)}})})()};for(var prop in scope){var _ret=_loop(prop);if(_ret==="continue")continue}}()};function syncController(ctrlDoms,key,newValue){"use strict";for(var i=0,length=ctrlDoms.length;i<length;i++){(function bindData(children){for(var _i=0,_length=children.length;_i<_length;_i++){var child=children[_i];if(child.attributes["lc-text"]&&child.attributes["lc-model"]&&child.attributes["lc-html"]){child.attributes["lc-html"]&&child.attributes["lc-html"].value===key&&$lc.directives.html.$update(child,newValue);child.attributes["lc-text"]&&child.attributes["lc-text"].value===key&&$lc.directives.text.$update(child,newValue);child.attributes["lc-model"]&&child.attributes["lc-model"].value===key&&$lc.directives.model.$update(child,newValue)}else{if(child.children.length>0){bindData(child.children)}else{var regDirectives=[];for(var _i2=0,_length2=child.attributes.length;_i2<_length2;_i2++){var attr=child.attributes[_i2].name;if(attr.indexOf("lc-")>-1&&attr!=="lc-text"&&attr!=="lc-model"&&attr!=="lc-html"){regDirectives.push(attr)}}for(var _i3=0,_length3=regDirectives.length;_i3<_length3;_i3++){$lc.directives[regDirectives[_i3]]&&$lc.directives[regDirectives[_i3]].$init&&$lc.directives[regDirectives[_i3]].$init(child)}}}}})(ctrlDoms[i].children)}}}},{"../_/_":3}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directive=undefined;var _2=require("../_/_");exports.directive=directive;function directive($lc){$lc.directive=function(name,options){}}},{"../_/_":3}]},{},[2]);
//# sourceMappingURL=LancerFrame.js.map
