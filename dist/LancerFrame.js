(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initFunc=undefined;var _main=require("./directives/_main");var _main2=require("./dom-init/_main");exports.initFunc=initFunc;function initFunc($lc){(0,_main.directiveMain)($lc);(0,_main2.domInit)($lc)}},{"./directives/_main":4,"./dom-init/_main":11}],2:[function(require,module,exports){"use strict";var _main=require("./static-func/_main");var _LancerFrameInit=require("./LancerFrame-init.js");(function(root,undefined){"use strict";var $lc={};$lc.VERSION="0.0.1";$lc.AUTHOR="LancerComet";$lc.BROWSER="";(0,_main.setStaticFunc)($lc);(function(){$lc.inited=false;$lc.on(window,"DOMContentLoaded",function(){if($lc.inited)return;console.log("Init at DOMContentLoaded");(0,_LancerFrameInit.initFunc)($lc);$lc.inited=true});$lc.on(window,"load",function(){if($lc.inited)return;console.log("Init at window.onload");(0,_LancerFrameInit.initFunc)($lc);$lc.inited=true});setTimeout(function(){document.readyState==="complete"&&function(){if($lc.inited)return;console.log("Init at readyState = complete");(0,_LancerFrameInit.initFunc)($lc);$lc.inited=true}()},1)})();root.LancerFrame=root.$lc=$lc})(window)},{"./LancerFrame-init.js":1,"./static-func/_main":12}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _=exports._={"typeof":function _typeof(target){return Object.prototype.toString.call(target).match(/ \S*/i)[0].replace(" ","").replace("]","").toLowerCase()}}},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directiveMain=undefined;var _directive=require("./directive");var _lcText=require("./lc-text");var _lcModel=require("./lc-model");var _lcHtml=require("./lc-html");var _lcClick=require("./lc-click");var _lcMouseEvent=require("./lc-mouse-event");exports.directiveMain=directiveMain;function directiveMain($lc){$lc.directives={};$lc.directive=_directive.directive;(0,_lcModel.lcModel)($lc);(0,_lcText.lcText)($lc);(0,_lcHtml.lcHTML)($lc);(0,_lcClick.lcClick)($lc);(0,_lcMouseEvent.lcMouseEvents)($lc)}},{"./directive":5,"./lc-click":6,"./lc-html":7,"./lc-model":8,"./lc-mouse-event":9,"./lc-text":10}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directive=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _2=require("../_/_");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}exports.directive=directive;function directive(name,options){if(_2._.typeof(name)!=="string"){throw new Error("自定义指令时必须使用字符串作为指令名称.")}$lc.directives["lc-"+name]=function(){function _class(element,scope){_classCallCheck(this,_class);this.$element=element;this.$scope=scope;this.$directiveName="lc-"+name;this.$expr=this.$element.attributes[this.$directiveName].value;options.$init&&options.$init.call(this,this.$element,this.scope);if(options.$done){var _$done=this.$done;_$done.call(this);options.$done.call(this)}else{this.$done.call(this)}if(options.$update){var _$update=this.$update;this.$update=function(){_$update.call(this);options.$update.apply(this,arguments)}}if(options.$destory){var _$destory=this.$destory;this.$destory=function(){_$destory.call(this);options.$destory.apply(this,arguments)}}this.$removeDirective()}_createClass(_class,[{key:"$done",value:function $done(){}},{key:"$update",value:function $update(){}},{key:"$destory",value:function $destory(){}},{key:"$removeDirective",value:function $removeDirective(){this.$element.removeAttribute(this.$directiveName)}}]);return _class}()}},{"../_/_":3}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcClick=lcClick;function lcClick($lc){$lc.directive("click",{$done:function $done(){$lc.on(this.$element,"click",this.$scope[this.$expr])},$update:function $update(){}})}},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcHTML=lcHTML;function lcHTML($lc){$lc.directive("html",{$done:func,$update:func});function func(value){this.$element.innerHTML=value}}},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcModel=lcModel;function lcModel($lc){$lc.directive("model",{$init:function $init(){var self=this,element=this.$element,scope=this.$scope,imeIgnored=false;this.duplexIgnored=false;$lc.on(element,"compositionstart",function(){imeIgnored=true});$lc.on(element,"compositionend",function(){imeIgnored=false});$lc.on(element,"focus",function(){self.duplexIgnored=true});$lc.on(element,"blur",function(){self.duplexIgnored=false});element.addEventListener("input",inputEvent,false);if($lc.BROWSER==="IE 9"){$lc.on(element,"cut",function(){setTimeout(inputEvent,1)});$lc.on(element,"keyup",function(event){event=event||window.event;(event.keyCode===46||event.keyCode===8)&&inputEvent()})}function inputEvent(){if(imeIgnored){return}scope[self.$expr]=element.value}},$update:function $update(newValue){if(this.duplexIgnored)return;this.$element.value=newValue},$done:function $done(){this.$element.value=this.$scope[this.$expr]}})}},{}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcMouseEvents=lcMouseEvents;function lcMouseEvents($lc){$lc.directive("mouseenter",{$done:function $done(){$lc.on(this.$element,"mouseenter",this.$scope[this.$expr])},$update:function $update(newFunc){}});$lc.directive("mouseleave",{$done:function $done(){$lc.on(this.$element,"mouseleave",this.$scope[this.$expr])},$update:function $update(){}});$lc.directive("mouseover",{$done:function $done(){$lc.on(this.$element,"mouseover",this.$scope[this.$expr])},$update:function $update(){}});$lc.directive("mouseout",{$done:function $done(){$lc.on(this.$element,"mouseout",this.$scope[this.$expr])},$update:function $update(){}})}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lcText=lcText;function lcText($lc){$lc.directive("text",{$done:function $done(){this.$element.innerText=this.$scope[this.$expr]},$update:function $update(newValue){console.log("lc-text on $update: newValue = "+newValue);this.$element.innerText=newValue}})}},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.domInit=domInit;function domInit($lc){"use strict";for(var ctrl in $lc.controllers){var scope=$lc.controllers[ctrl];if(!scope.$ctrlDoms){scope.$ctrlDoms=document.querySelectorAll("[lc-controller="+scope.$name+"]")}if(!scope.$directives){scope.$directives=[]}scope.$initFunc&&function(){scope.$initFunc.apply(scope,[scope]);var _loop=function _loop(prop){if(!scope.hasOwnProperty(prop)||prop==="$name"||prop==="$directives"||prop==="$initFunc"||prop==="$ctrlDoms"){return"continue"}(function(){var propKey=prop,propValue=scope[prop];Object.defineProperty(scope,propKey,{get:function get(){return propValue},set:function set(newValue){console.log(scope.$name+"."+propKey+" 从 "+propValue+" 修改为 "+newValue);propValue=newValue;syncController(scope,propKey,propValue)}})})()};for(var prop in scope){var _ret=_loop(prop);if(_ret==="continue")continue}}();for(var i=0,length=scope.$ctrlDoms.length;i<length;i++){initController(scope.$ctrlDoms[i],scope)}}function initController(ctrlDom,scope){(function initChilden(ctrlChildren){for(var _i=0,_length=ctrlChildren.length;_i<_length;_i++){var child=ctrlChildren[_i];if(child.children.length>0){initChilden(child.children)}else{for(var _i2=0,_length2=child.attributes.length;_i2<_length2;_i2++){var direcitveName=child.attributes[_i2].name,directiveExpr=child.attributes[_i2].value;if(direcitveName.indexOf("lc-")<0){continue}if($lc.directives[direcitveName]&&directiveExpr){scope.$directives.push(new $lc.directives[direcitveName](child,scope))}}}}})(ctrlDom.children)}function syncController(scope,expr,newValue){"use strict";scope.$directives.forEach(function(directiveObj,index,$directives){if(directiveObj.$expr===expr)directiveObj.$update(newValue)})}}},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setStaticFunc=undefined;var _css=require("./css");var _onOff=require("./on-off");var _controller=require("./controller");exports.setStaticFunc=staticFunc;function staticFunc($lc){(0,_controller.controller)($lc);(0,_css.css)($lc);(0,_onOff.on)($lc);(0,_onOff.off)($lc)}},{"./controller":13,"./css":14,"./on-off":15}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controller=undefined;var _2=require("../_/_");exports.controller=controller;function controller($lc){$lc.controllers={};$lc.controller=function(ctrlName,dependencies,initFunc){console.log("$lc.controller");if(_2._.typeof(dependencies)!=="array"){initFunc=dependencies;dependencies=[]}$lc.controllers[ctrlName]={$name:ctrlName,$initFunc:initFunc}}}},{"../_/_":3}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.css=css;function css($lc){$lc.css=function(element,prop,value){if(element.style.prop===undefined)return;element.style.prop=value}}},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.on=on;exports.off=off;function on($lc){$lc.on=function(element,eventType,eventHanler){if(element.addEventListener){element.addEventListener(eventType,eventHanler,false)}else if(element.attachEvent){element.attachEvent("on"+eventType,eventHanler)}else{element["on"+eventType]=eventHanler}}}function off($lc){$lc.off=function(element,eventType,eventHanler){if(element.removeEventListener){element.removeEventListener(eventType,eventHanler,false)}else if(element.detachEvent){element.detachEvent("on"+eventType,eventHanler)}else{element["on"+eventType]=null}}}},{}]},{},[2]);
//# sourceMappingURL=LancerFrame.js.map
