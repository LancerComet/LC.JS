(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";(function(root,undefined){"use strict";var startTime=performance.now();console.log("StartTime: "+startTime);var LancerFrame={};LancerFrame.VERSION="0.0.1";LancerFrame.AUTHOR="LancerComet";LancerFrame.BROWSER=require("./init/browser-detective")();LancerFrame.controller=require("./module-func/controller").controller;LancerFrame.domFuncs={findChildrenByAttr:require("./static-func/find-children-by-attr")};(function(){LancerFrame.inited=false;LancerFrame.init=require("./init/init");window.addEventListener("DOMContentLoaded",function(){console.log("Init at DOMContentLoaded");LancerFrame.init(LancerFrame);var endTime=performance.now();console.log("EndTime: "+endTime);console.log("Init takes "+(endTime-startTime))});window.addEventListener("load",function(){if(LancerFrame.inited)return;LancerFrame.init(LancerFrame)});setTimeout(function(){if(LancerFrame.inited)return;document.readyState==="complete"&&LancerFrame.init(LancerFrame)},1)})();root.LancerFrame=root.$lc=LancerFrame})(window)},{"./init/browser-detective":10,"./init/init":11,"./module-func/controller":12,"./static-func/find-children-by-attr":13}],2:[function(require,module,exports){"use strict";module.exports={syncData:syncDataInSetter};var lcText=require("../data-bind/lc-text"),lcHtml=require("../data-bind/lc-html"),lcModel=require("../data-bind/lc-model"),lcCSS=require("../style-edit/lc-css");function syncDataInSetter(ctrlDom,key,newValue){for(var i=0,length=ctrlDom.length;i<length;i++){(function bindData(children){for(var i=0,length=children.length;i<length;i++){var child=children[i];if(!child.attributes["lc-text"]&&!child.attributes["lc-model"]&&!child.attributes["lc-html"]){child.children.length>0&&bindData(child.children)}else{child.attributes["lc-text"]&&child.attributes["lc-text"].value===key&&lcText.syncData(child,newValue);child.attributes["lc-model"]&&child.attributes["lc-model"].value===key&&lcModel.syncData(child,newValue);child.attributes["lc-html"]&&child.attributes["lc-html"].value===key&&lcHtml.syncData(child,newValue)}lcCSS.setCSS(child,key,newValue)}})(ctrlDom[i].children)}}},{"../data-bind/lc-html":3,"../data-bind/lc-model":4,"../data-bind/lc-text":5,"../style-edit/lc-css":9}],3:[function(require,module,exports){"use strict";var directiveName="lc-html";module.exports={init:initLcHTML,syncData:setData};function initLcHTML(children,scopeObj){for(var i=0,length=children.length;i<length;i++){var child=children[i];if(!child.attributes[directiveName]){child.children.length>0&&initLcHTML(child.children,scopeObj);continue}setData(child,scopeObj[child.attributes[directiveName].value])}}function setData(element,value){element.innerHTML=value}},{}],4:[function(require,module,exports){"use strict";var directiveName="lc-model";module.exports={init:initLcModel,syncData:setData};function initLcModel(children,scopeObj,LancerFrame){for(var i=0,length=children.length;i<length;i++){var child=children[i];if(!child.attributes[directiveName]){child.children.length>0&&initLcModel(child.children,scopeObj,LancerFrame);continue}var keyName=child.attributes[directiveName].value;child.value=scopeObj[keyName]?scopeObj[keyName]:"";(function(keyName,child){var imeIgnored=false;child.addEventListener("compositionstart",function(){imeIgnored=true});child.addEventListener("compositionend",function(){imeIgnored=false});child.addEventListener("input",inputEvent,false);if(LancerFrame.BROWSER==="IE 9"){child.addEventListener("cut",function(){console.log("cut event");setTimeout(inputEvent,1)});child.addEventListener("keyup",function(event){console.log("keyup event");event=event||window.event;(event.keyCode===46||event.keyCode===8)&&inputEvent()})}if(LancerFrame.BROWSER.indexOf("IE")>-1){child.addEventListener("keyup",function(event){console.log("keyup event");event=event||window.event;if(event.keyCode===17||event.keyCode===18||event.ctrlKey||event.shiftKey||event.altKey){return}inputEvent()})}function inputEvent(){if(imeIgnored){return}scopeObj[keyName]=child.value}})(keyName,child)}}function setData(element,value){element.value=value}},{}],5:[function(require,module,exports){"use strict";var directiveName="lc-text";module.exports={init:initLcText,syncData:setData};function initLcText(children,scopeObj){for(var i=0,length=children.length;i<length;i++){var child=children[i];if(!child.attributes[directiveName]){child.children.length>0&&initLcText(child.children,scopeObj);continue}setData(child,scopeObj[child.attributes[directiveName].value])}}function setData(element,value){element.innerText?element.innerText=value:element.textContent=value}},{}],6:[function(require,module,exports){"use strict";var directiveName="lc-click";module.exports={init:initLcClick};function initLcClick(elements,scopeObj){for(var i=0,length=elements.length;i<length;i++){var element=elements[i];if(!element.attributes[directiveName]){element.children.length&&initLcClick(element.children,scopeObj);continue}var clickEvent=scopeObj[element.attributes[directiveName].value];element.addEventListener("click",clickEvent,false)}}},{}],7:[function(require,module,exports){"use strict";var directiveName="lc-mouseenter";module.exports={init:initLcMouseEnter};function initLcMouseEnter(elements,scopeObj){for(var i=0,length=elements.length;i<length;i++){var element=elements[i];if(!element.attributes[directiveName]){element.children.length&&initLcMouseEnter(element.children,scopeObj);continue}var event=scopeObj[element.attributes[directiveName].value];element.addEventListener("mouseenter",event,false)}}},{}],8:[function(require,module,exports){"use strict";var directiveName="lc-mouseleave";module.exports={init:initLcMouseLeave};function initLcMouseLeave(elements,scopeObj){for(var i=0,length=elements.length;i<length;i++){var element=elements[i];if(!element.attributes[directiveName]){element.children.length&&initLcMouseLeave(element.children,scopeObj);continue}var event=scopeObj[element.attributes[directiveName].value];element.addEventListener("mouseleave",event,false)}}},{}],9:[function(require,module,exports){"use strict";module.exports={init:initLcCSS,setCSS:setCSS};var directivePriefx="lc-css";function initLcCSS(children,scopeObj){for(var i=0,length=children.length;i<length;i++){setCSS(children[i],null,null,scopeObj)}}function setCSS(element,key,value,scopeObj){for(var i=0,length=element.attributes.length;i<length;i++){var attr=element.attributes[i];var attrName=attr.name;if(attrName.indexOf(directivePriefx)<0||key&&attr.value!==key){continue}if(scopeObj){value=scopeObj[attr.value]}var propName=attrName.substr(directivePriefx.length+1);cssModify(element,propName,value)}}function cssModify(element,cssProp,value){element.style[cssProp]=value}},{}],10:[function(require,module,exports){"use strict";module.exports=explorerDetective;function explorerDetective(){var userAgent=window.navigator.appVersion;var browser={myBrowser:"unknown",database:[{type:"IE Legacy",regExp:"MSIE [1-6].*"},{type:"IE 7",regExp:"MSIE [7].*"},{type:"IE 8",regExp:"MSIE [8].*"},{type:"IE 9",regExp:"MSIE [9].*"},{type:"IE Modern",regExp:"Trident/[6-9].*"},{type:"Firefox",regExp:"Firefox/[0-9].*"},{type:"Safari",regExp:"AppleWebKit/[0-9].*.Safari/[0-9]"},{type:"Chrome",regExp:"AppleWebKit/[0-9].*.Chrome/[0-9].*.Safari/[0-9]"},{type:"Opera Presto",regExp:"Opera.[0-9].*.Presto/[0-9]"},{type:"Opera Modern",regExp:"OPR/[0-9][0-9]"},{type:"Edge",regExp:"Edge/[0-9].*"},{type:"Maxthon 4",regExp:"Maxthon/[4]"}]};(function matchExplorer(){for(var i=0,length=browser.database.length;i<length;i++){var newRegExp=new RegExp(browser.database[i].regExp);if(userAgent.match(newRegExp)){browser.myBrowser=browser.database[i].type}}})();return browser.myBrowser}},{}],11:[function(require,module,exports){"use strict";var controllerMaps=require("./../module-func/controller").controllerMaps;var initDirectives=[require("./../directives/data-bind/lc-model").init,require("./../directives/data-bind/lc-text").init,require("./../directives/data-bind/lc-html").init,require("./../directives/dom-events/lc-click").init,require("./../directives/dom-events/lc-mouseenter").init,require("./../directives/dom-events/lc-mouseleave").init,require("./../directives/style-edit/lc-css").init];module.exports=function(LancerFrame){console.log("init");var ctrls=document.querySelectorAll("[lc-controller]");for(var i=0,length=ctrls.length;i<length;i++){var ctrl=ctrls[i];var ctrlName=ctrl.attributes["lc-controller"].value;var scopeObj=controllerMaps[ctrlName];console.log(scopeObj);var children=ctrl.children;(function(){for(var i=0,length=initDirectives.length;i<length;i++){initDirectives[i](children,scopeObj,LancerFrame)}})()}LancerFrame.inited=true}},{"./../directives/data-bind/lc-html":3,"./../directives/data-bind/lc-model":4,"./../directives/data-bind/lc-text":5,"./../directives/dom-events/lc-click":6,"./../directives/dom-events/lc-mouseenter":7,"./../directives/dom-events/lc-mouseleave":8,"./../directives/style-edit/lc-css":9,"./../module-func/controller":12}],12:[function(require,module,exports){"use strict";var syncData=require("./../directives/_common/common").syncData;var controllerMaps={};module.exports={controller:controllerDefine,controllerMaps:controllerMaps};function controllerDefine(ctrlName,dependencies,initFunc){if(Object.prototype.toString.call(dependencies)!=="[object Array]"){initFunc=dependencies;dependencies=[]}controllerMaps[ctrlName]={$controllerctrlName:ctrlName};initFunc&&function(){initFunc(controllerMaps[ctrlName]);var scope=controllerMaps[ctrlName];for(var prop in scope){if(!scope.hasOwnProperty(prop)||prop==="$controllerCtrlName"){continue}(function(){var itemKey=prop;var itemValue=scope[prop];var ctrlDoms=null,lcIfNodes=null;Object.defineProperty(scope,itemKey,{get:function get(){return itemValue},set:function set(newValue){!ctrlDoms&&(ctrlDoms=document.querySelectorAll("[lc-controller="+ctrlName+"]"));!lcIfNodes&&function(){if(newValue){}else{}}();console.log(ctrlName+"."+itemKey+" 从 "+itemValue+" 修改为 "+newValue);itemValue=newValue;syncData(ctrlDoms,itemKey,newValue)}})})()}}()}},{"./../directives/_common/common":2}],13:[function(require,module,exports){"use strict";module.exports=function(parent,attr,value){var children=parent.children;var result=[];for(var i=0,length=children.length;i<length;i++){var child=children[i];console.log(child.attributes[attr]?child.attributes[attr].value:"no this attr");if(value){if(child.attributes[attr]&&child.attributes[attr].value===value){result.push(child)}if(child.children.length){result=result.concat(findChildren(child,attr,value))}}else{if(child.attributes[attr]){result.push(child)}if(child.children.length){result=result.concat(findChildren(child,attr,value))}}}return result}},{}]},{},[1]);
//# sourceMappingURL=LancerFrame.js.map
