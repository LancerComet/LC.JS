(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _=exports._={"typeof":function _typeof(target){return Object.prototype.toString.call(target).match(/ \S*/i)[0].replace(" ","").replace("]","").toLowerCase()},browser:function browser(){var result="";var browser=navigator.appVersion;if(window.ScriptEngine||browser.indexOf("Trident")>-1){if(browser.indexOf("MSIE 9.0")>-1)result="IE 9";if(browser.indexOf("MSIE 10.0")>-1||browser.indexOf("Trident/7.0")>-1&&browser.indexOf("rv:11.0")>-1)result="IE Modern";if(browser.indexOf("Edge")>-1)result="Edge"}else if(browser.indexOf("Chrome/")>-1){result="Chrome"}return result}}},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controller=undefined;var _2=require("../_/_");exports.controller=controller;function controller($lc){"use strict";$lc.controllers={};$lc.controller=function(ctrlName,dependencies,initFunc){if(_2._.typeof(dependencies)!=="array"){initFunc=dependencies;dependencies=[]}$lc.controllers[ctrlName]={$name:ctrlName,$initFunc:initFunc,$dependencies:dependencies}}}},{"../_/_":1}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directiveMain=undefined;var _internalDirectives=require("./internal-directives");exports.directiveMain=directiveMain;function directiveMain($lc){(0,_internalDirectives.internalDirectives)($lc)}},{"./internal-directives":5}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.directive=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _2=require("../_/_");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}exports.directive=directive;function directive($lc){$lc.directives={};$lc.directive=function(name,options){if(_2._.typeof(name)!=="string"){throw new Error("自定义指令时必须使用字符串作为指令名称.")}$lc.directives["lc-"+name]=function(){function _class(element,scope){_classCallCheck(this,_class);this.$element=element;this.$scope=scope;this.$directiveName="lc-"+name;this.$expr=this.$element.attributes[this.$directiveName].value;options.$init&&options.$init.call(this,this.$element,this.scope);if(options.$done){var _$done=this.$done;_$done.call(this);options.$done.call(this)}else{this.$done.call(this)}if(options.$update){var _$update=this.$update;this.$update=function(){_$update.call(this);options.$update.apply(this,arguments)}}if(options.$destory){var _$destory=this.$destory;this.$destory=function(){_$destory.call(this);options.$destory.apply(this,arguments)}}this.$removeDirective()}_createClass(_class,[{key:"$done",value:function $done(){}},{key:"$update",value:function $update(){}},{key:"$destory",value:function $destory(){}},{key:"$removeDirective",value:function $removeDirective(){this.$element.removeAttribute(this.$directiveName)}}]);return _class}()}}},{"../_/_":1}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.internalDirectives=internalDirectives;function internalDirectives($lc){$lc.directive("text",{$done:function $done(){this.$element.innerText=this.$scope[this.$expr]},$update:function $update(newValue){this.$element.innerText=newValue}});(function(){$lc.directive("html",{$done:func,$update:func});function func(value){this.$element.innerHTML=value}})();$lc.directive("model",{$init:function $init(){var _this=this;var self=this,element=this.$element,scope=this.$scope,imeIgnored=false;this.duplexIgnored=false;$lc.on(element,"compositionstart",function(){imeIgnored=true});$lc.on(element,"compositionend",function(){imeIgnored=false});$lc.on(element,"focus",function(){return _this.duplexIgnored=true});$lc.on(element,"blur",function(){return _this.duplexIgnored=false});element.addEventListener("input",inputEvent,false);if($lc.BROWSER==="IE 9"){$lc.on(element,"cut",function(){return setTimeout(inputEvent,1)});$lc.on(element,"keyup",function(event){event=event||window.event;(event.keyCode===46||event.keyCode===8)&&inputEvent()})}function inputEvent(){if(imeIgnored){return}scope[self.$expr]=element.value}},$update:function $update(newValue){if(this.duplexIgnored)return;this.$element.value=newValue},$done:function $done(){this.$element.value=this.$scope[this.$expr]}});(function(){$lc.directive("mouseenter",{$done:function $done(){$lc.on(this.$element,"mouseenter",this.$scope[this.$expr])},$update:function $update(newFunc){}});$lc.directive("mouseleave",{$done:function $done(){$lc.on(this.$element,"mouseleave",this.$scope[this.$expr])},$update:function $update(){}});$lc.directive("mouseover",{$done:function $done(){$lc.on(this.$element,"mouseover",this.$scope[this.$expr])},$update:function $update(){}});$lc.directive("mouseout",{$done:function $done(){$lc.on(this.$element,"mouseout",this.$scope[this.$expr])},$update:function $update(){}})})();$lc.directive("click",{$done:function $done(){this.$clickEvent=this.$scope[this.$expr];$lc.on(this.$element,"click",this.$clickEvent)},$update:function $update(newValue){$lc.off(this.$element,"click",this.$clickEvent);this.$clickEvent=newValue;$lc.on(this.$element,"click",this.$clickEvent)}})}},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.domInit=domInit;function domInit($lc){"use strict";var _loop=function _loop(controller){if(!$lc.controllers.hasOwnProperty(controller))return"continue";(function(){var ctrl=controller;var scope=$lc.controllers[ctrl];if(!scope.$ctrlDoms){scope.$ctrlDoms=document.querySelectorAll("[lc-controller="+scope.$name+"]")}if(!scope.$directives){scope.$directives=[]}scope.$initFunc&&function(){var $dependencies=[];if(scope.$dependencies){scope.$dependencies.forEach(function(dependency,index,dependencies){$dependencies[index]=$lc.controllers[dependency]?$lc.controllers[dependency]:$lc.services[dependency]?$lc.services[dependency]:null})}scope.$initFunc.apply(scope,[scope].concat($dependencies));var _loop2=function _loop2(prop){if(!scope.hasOwnProperty(prop)||prop==="$name"||prop==="$directives"||prop==="$initFunc"||prop==="$ctrlDoms"||prop==="$dependencies"){return"continue"}(function(){var propKey=prop,propValue=scope[prop];Object.defineProperty(scope,propKey,{get:function get(){return propValue},set:function set(newValue){console.log(scope.$name+"."+propKey+" 从 "+propValue+" 修改为 "+newValue);propValue=newValue;syncController(scope,propKey,propValue)}})})()};for(var prop in scope){var _ret2=_loop2(prop);if(_ret2==="continue")continue}}();for(var i=0,length=scope.$ctrlDoms.length;i<length;i++){initController(scope.$ctrlDoms[i],scope);scope.$ctrlDoms[i].setAttribute("lc-ctrl",scope.$name);scope.$ctrlDoms[i].removeAttribute("lc-controller")}})()};for(var controller in $lc.controllers){var _ret=_loop(controller);if(_ret==="continue")continue}function initController(ctrlDom,scope){(function initChilden(ctrlChildren){for(var i=0,length=ctrlChildren.length;i<length;i++){var child=ctrlChildren[i];if(child.attributes["lc-controller"]){return}if(child.children.length>0){initChilden(child.children)}else{for(var _i=0,_length=child.attributes.length;_i<_length;_i++){var direcitveName=child.attributes[_i].name,directiveExpr=child.attributes[_i].value;if(direcitveName.indexOf("lc-")<0){continue}if($lc.directives[direcitveName]){scope.$directives.push(new $lc.directives[direcitveName](child,scope))}}}}})(ctrlDom.children)}function syncController(scope,expr,newValue){scope.$directives.forEach(function(directiveObj,index,$directives){return directiveObj.$expr===expr&&directiveObj.$update(newValue)})}}},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.initFunc=undefined;var _main=require("./directives/_main");var _main2=require("./service/_main");var _main3=require("./dom-init/_main");exports.initFunc=initFunc;function initFunc($lc){(0,_main.directiveMain)($lc);(0,_main2.serviceMain)($lc);(0,_main3.domInit)($lc)}},{"./directives/_main":3,"./dom-init/_main":6,"./service/_main":9}],8:[function(require,module,exports){"use strict";var _2=require("./_/_");var _main=require("./static-func/_main");var _init=require("./init.js");(function(root,undefined){"use strict";var $lc={};$lc.VERSION="0.0.1";$lc.AUTHOR="LancerComet";$lc.BROWSER=_2._.browser();(0,_main.setStaticFunc)($lc);(function(){$lc.inited=false;$lc.on(window,"DOMContentLoaded",function(){if($lc.inited)return;console.log("Init at DOMContentLoaded");(0,_init.initFunc)($lc);$lc.inited=true});$lc.on(window,"load",function(){if($lc.inited)return;console.log("Init at window.onload");(0,_init.initFunc)($lc);$lc.inited=true});setTimeout(function(){document.readyState==="complete"&&function(){if($lc.inited)return;console.log("Init at readyState = complete");(0,_init.initFunc)($lc);$lc.inited=true}()},1)})();root.LancerFrame=root.$lc=$lc})(window)},{"./_/_":1,"./init.js":7,"./static-func/_main":12}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.serviceMain=serviceMain;var _service=require("./service");var _internalService=require("./internal-service");function serviceMain($lc){(0,_service.service)($lc);(0,_internalService.internalSerivces)($lc)}},{"./internal-service":10,"./service":11}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.internalSerivces=internalSerivces;function internalSerivces($lc){(function(){if(!window.Promise)return;$lc.service("$q",function(){return function(asyncFunc){return new Promise(function(resolve,reject){asyncFunc&&asyncFunc(resolve,reject)})}})})();$lc.service("$http",function(){return{get:function get(url,data){},post:function post(url,data){},jsonp:function jsonp(url,data,callbackName,callback){}}})}},{}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.service=service;function service($lc){$lc.services={};$lc.service=function(name,initFunc){$lc.services[name]=initFunc()}}},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setStaticFunc=undefined;var _css=require("./css");var _onOff=require("./on-off");var _controller=require("../controller/controller");var _directive=require("../directives/directive");exports.setStaticFunc=staticFunc;function staticFunc($lc){(0,_controller.controller)($lc);(0,_directive.directive)($lc);(0,_css.css)($lc);(0,_onOff.on)($lc);(0,_onOff.off)($lc)}},{"../controller/controller":2,"../directives/directive":4,"./css":13,"./on-off":14}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.css=css;function css($lc){$lc.css=function(element,prop,value){if(element.style.prop===undefined)return;element.style.prop=value}}},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.on=on;exports.off=off;function on($lc){$lc.on=function(element,eventType,eventHanler){if(element.addEventListener){element.addEventListener(eventType,eventHanler,false)}else if(element.attachEvent){element.attachEvent("on"+eventType,eventHanler)}else{element["on"+eventType]=eventHanler}}}function off($lc){$lc.off=function(element,eventType,eventHanler){if(element.removeEventListener){element.removeEventListener(eventType,eventHanler,false)}else if(element.detachEvent){element.detachEvent("on"+eventType,eventHanler)}else{element["on"+eventType]=null}}}},{}]},{},[8]);
//# sourceMappingURL=LancerFrame.js.map
